// Language translations
const translations = {
    en: {
        nav: {
            about: "About",
            process: "Process",
            faq: "Answers",
            contact: "Contact"
        },
        hero: {
            badge: "Creating unique brand experiences",
            description: "Creative User Experience Designer and Full Stack Developer. Specialized in creating user-focused identities and developing captivating digital experiences through intuitive design.",
            cta: "Get Started Today",
            projects: "View Projects",
	    name: "Omar Abdulmajeed"
        },
        about: {
            title: "Meet",
            subtitle: "Creative User Experience Designer and Full Stack Developer. My approach in creating user‑focused identities and developing captivating and engaging digital experiences through intuitive design."
        },
        skills: {
            web: "Web Development",
            mobile: "Mobile Development",
            design: "UI/UX Design",
            qa: "Quality Assurance",
            data: "Data Analysis",
            pm: "Project Management"
        },
        experience: {
            role: "Role",
            company: "Company",
            year: "Year",
            freelancer: "Freelancer",
            fullstack: "Full Stack Developer"
        },
        process: {
            badge: "Design Journey",
            title: "Process",
            subtitle: "Crafting bold visuals that inspire and elevate brands with thoughtful precision.",
            call: "Book a Free Call",
            projects: "See Projects",
            step1: {
                title: "Define Vision",
                desc: "Explore and refine your vision in your needs, charting the right balance of features, flexibility, and values as they can enhance your visual presence."
            },
            step2: {
                title: "Submit Your Request",
                desc: "Easily submit your design requirements through our online design portal, ensuring a seamless process where your ideas or screenshots through our intuitive brief using the dashboard."
            },
            step3: {
                title: "Project Delivered",
                desc: "As a design‑forward company, your brand's excellence combined with unmatched attention to 2‑3 days time in team to make it ideal for those seeking fast and ideal for your visual requirements."
            }
        },
        projects: {
            title: "Recent Works",
            description: "A selection of software engineering projects showcasing skills in full-stack development, algorithm design, and scalable solutions. These projects highlight practical experience with modern technologies and clean, efficient code."
        },
        faq: {
            title: "Answers",
            subtitle: "Find answers to common questions about my design process, services, and deliverables.",
            q1: {
                question: "What services do you provide?",
                answer: "I specialize in UI/UX design, web development, mobile app design, and comprehensive brand identity solutions."
            },
            q2: {
                question: "How do I start working with you?",
                answer: "Simply reach out through the contact section or email me directly. We'll discuss your project requirements and timeline."
            },
            q3: {
                question: "What design tools do you use?",
                answer: "I use industry‑standard tools including Figma, Adobe Creative Suite, and modern development frameworks."
            },
            q4: {
                question: "How long does a project take?",
                answer: "Project timelines vary based on complexity, but most projects are completed within 2‑4 weeks."
            },
            q5: {
                question: "Do you provide revisions?",
                answer: "Yes, I include multiple revision rounds to ensure your complete satisfaction with the final result."
            },
            q6: {
                question: "What are your working hours?",
                answer: "I maintain flexible hours to accommodate clients across different time zones and project requirements."
            },
            q7: {
                question: "Do you offer web development services?",
                answer: "Yes, I provide full-stack development services including both frontend and backend development."
            },
            q8: {
                question: "What's your pricing structure?",
                answer: "Pricing varies based on project scope and complexity. Contact me for a detailed quote tailored to your needs."
            },
            q9: {
                question: "Can you redesign my existing website?",
                answer: "Absolutely! I can help redesign and modernize existing websites to improve user experience and visual appeal."
            }
        },
        contact: {
            title: "Let's start the journey with me",
            resume: "Download Resume",
            resume_lang: "Select Resume Language"
	    
        },
        footer: {
            rights: "All rights reserved. 2025 ©"
        }
    },
    ar: {
        nav: {
            about: "عني",
            process: "العملية",
            faq: "الأسئلة",
            contact: "تواصل"
        },
        hero: {
            badge: "إنشاء تجارب علامة تجارية فريدة",
            description: "مصمم تجربة مستخدم إبداعي ومطور Full Stack. متخصص في إنشاء هويات تركز على المستخدم وتطوير تجارب رقمية جذابة من خلال تصميم بديهي.",
            cta: "ابدأ اليوم",
            projects: "عرض المشاريع",
    name: "عمر عبدالمجيد"
        },
        about: {
            title: "تعرّف على",
            subtitle: "مصمم تجربة مستخدم إبداعي ومطور Full Stack. نهجي في إنشاء هويات تركز على المستخدم وتطوير تجارب رقمية جذابة وجذابة من خلال تصميم بديهي."
        },
        skills: {
            web: "تطوير الويب",
            mobile: "تطوير تطبيقات الجوال",
            design: "تصميم واجهة المستخدم",
            qa: "ضمان الجودة",
            data: "تحليل البيانات",
            pm: "إدارة المشاريع"
        },
        experience: {
            role: "الوظيفة",
            company: "الشركة",
            year: "السنة",
            freelancer: "أعمال حرة",
            fullstack: "مطور Full Stack"
        },
        process: {
            badge: "رحلة التصميم",
            title: "العملية",
            subtitle: "صياغة صور جريئة تلهم وترتقي بالعلامات التجارية بدقة مدروسة.",
            call: "احجز مكالمة مجانية",
            projects: "شاهد المشاريع",
            step1: {
                title: "تحديد الرؤية",
                desc: "استكشف وحسّن رؤيتك في احتياجاتك، مع رسم التوازن الصحيح بين الميزات والمرونة والقيم حيث يمكنها تعزيز حضورك المرئي."
            },
            step2: {
                title: "أرسل طلبك",
                desc: "قم بإرسال متطلبات التصميم الخاصة بك بسهولة من خلال بوابة التصميم عبر الإنترنت، مما يضمن عملية سلسة حيث أفكارك أو لقطات الشاشة من خلال موجزنا البديهي باستخدام لوحة التحكم."
            },
            step3: {
                title: "تسليم المشروع",
                desc: "كشركة تركز على التصميم، تتميز علامتك التجارية بالتميز مع اهتمام لا مثيل له من 2-3 أيام في الفريق لجعلها مثالية لأولئك الذين يبحثون عن سرعة ومثالية لمتطلباتك البصرية."
            }
        },
        projects: {
            title: "الأعمال الأخيرة",
            description: "مجموعة مختارة من مشاريع هندسة البرمجيات التي تعرض المهارات في تطوير Full Stack وتصميم الخوارزميات والحلول القابلة للتطوير. تسلط هذه المشاريع الضوء على الخبرة العملية مع التقنيات الحديثة والكود النظيف والفعال."
        },
        faq: {
            title: "الإجابات",
            subtitle: "اعثر على إجابات للأسئلة الشائعة حول عملية التصميم والخدمات والنتائج.",
            q1: {
                question: "ما هي الخدمات التي تقدمها؟",
                answer: "أتخصص في تصميم واجهة المستخدم، تطوير الويب، تصميم تطبيقات الجوال، وحلول هوية العلامة التجارية الشاملة."
            },
            q2: {
                question: "كيف أبدأ العمل معك؟",
                answer: "ببساطة تواصل معي من خلال قسم الاتصال أو أرسل لي بريدًا إلكترونيًا مباشرة. سنناقش متطلبات مشروعك والجدول الزمني."
            },
            q3: {
                question: "ما هي أدوات التصميم التي تستخدمها؟",
                answer: "أستخدم أدوات معيارية في الصناعة بما في ذلك Figma وAdobe Creative Suite وأطر التطوير الحديثة."
            },
            q4: {
                question: "كم يستغرق المشروع؟",
                answer: "تختلف الجداول الزمنية للمشروع بناءً على التعقيد، ولكن معظم المشاريع تكتمل في غضون 2-4 أسابيع."
            },
            q5: {
                question: "هل تقدم مراجعات؟",
                answer: "نعم، أقوم بتضمين جولات مراجعة متعددة لضمان رضاك التام عن النتيجة النهائية."
            },
            q6: {
                question: "ما هي ساعات عملك؟",
                answer: "أحافظ على ساعات مرنة لاستيعاب العملاء عبر مناطق زمنية مختلفة ومتطلبات المشروع."
            },
            q7: {
                question: "هل تقدم خدمات تطوير الويب؟",
                answer: "نعم، أقدم خدمات تطوير Full Stack بما في ذلك تطوير الواجهة الأمامية والخلفية."
            },
            q8: {
                question: "ما هو هيكل التسعير الخاص بك؟",
                answer: "تختلف الأسعار بناءً على نطاق المشروع والتعقيد. اتصل بي للحصول على عرض أسعار مفصل مصمم خصيصًا لاحتياجاتك."
            },
            q9: {
                question: "هل يمكنك إعادة تصميم موقعي الحالي؟",
                answer: "بالتأكيد! يمكنني المساعدة في إعادة تصميم وتحديث المواقع الحالية لتحسين تجربة المستخدم والجاذبية البصرية."
            }
        },
        contact: {
            title: "لتبدأ الرحلة معي",
            resume: "تحميل السيرة الذاتية",
      resume_lang: "اختر لغة السيرة الذاتية"
        },
        footer: {
            rights: "جميع الحقوق محفوظة. 2025 ©"
        }
    }
};

// Get current language from localStorage or default to 'en'
let currentLang = 'en';

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
    // Get saved language and ensure it's a valid string
    const savedLang = localStorage.getItem('language');
    if (savedLang && (savedLang === 'en' || savedLang === 'ar')) {
        currentLang = savedLang;
    } else {
        currentLang = 'en';
        localStorage.setItem('language', 'en');
    }
    
    console.log('Current Language:', currentLang); // For debugging
    setLanguage(currentLang);
    updateActiveLanguage();
});

// Toggle language dropdown
function toggleLanguageDropdown(event) {
    event.stopPropagation();
    const dropdown = document.querySelector('.language-dropdown');
    dropdown.classList.toggle('active');
}

// Close dropdown when clicking outside
document.addEventListener('click', function() {
    const dropdown = document.querySelector('.language-dropdown');
    if (dropdown) {
        dropdown.classList.remove('active');
    }
});

// Change language
function changeLanguage(lang) {
    // Ensure lang is a clean string
    if (typeof lang !== 'string') {
        console.error('Invalid language type:', typeof lang);
        return;
    }
    
    // Normalize the language string
    lang = lang.toLowerCase().trim();
    
    if (lang !== 'en' && lang !== 'ar') {
        console.error('Invalid language:', lang);
        return;
    }
    
    currentLang = lang;
    localStorage.setItem('language', lang);
    
    console.log('Language changed to:', currentLang); // For debugging
    
    setLanguage(lang);
    updateActiveLanguage();
    
    // Close dropdown
    const dropdown = document.querySelector('.language-dropdown');
    if (dropdown) {
        dropdown.classList.remove('active');
    }
}

// Set language
function setLanguage(lang) {
    // Ensure lang is a valid string
    if (!lang || typeof lang !== 'string') {
        console.error('Invalid language parameter:', lang);
        lang = 'en';
    }
    
    lang = lang.toLowerCase().trim();
    
    console.log('Setting language to:', lang); // For debugging
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Update direction for RTL languages
    if (lang === 'ar') {
        document.documentElement.setAttribute('dir', 'rtl');
    } else {
        document.documentElement.setAttribute('dir', 'ltr');
    }
    
    // Update all elements with data-i18n attribute
    const elements = document.querySelectorAll('[data-i18n]');
    console.log('Found elements to translate:', elements.length); // For debugging
    
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = getTranslation(key, lang);
        if (translation) {
            element.textContent = translation;
        } else {
            console.warn('Missing translation for key:', key, 'in language:', lang);
        }
    });
    
    // Update current language display
    const currentLangElement = document.querySelector('.current-lang');
    if (currentLangElement) {
        if (lang === 'ar') {
            currentLangElement.textContent = 'العربية';
        } else {
            currentLangElement.textContent = 'English';
        }
    }
}

// Get translation by key
function getTranslation(key, lang) {
    const keys = key.split('.');
    let translation = translations[lang];
    
    for (const k of keys) {
        if (translation && translation[k]) {
            translation = translation[k];
        } else {
            return null;
        }
    }
    
    return translation;
}

// Update active language in dropdown
function updateActiveLanguage() {
    const options = document.querySelectorAll('.language-option');
    console.log('Updating active language. Current:', currentLang); // For debugging
    
    options.forEach(option => {
        const lang = option.getAttribute('data-lang');
        if (lang === currentLang) {
            option.classList.add('active');
            console.log('Set active:', lang); // For debugging
        } else {
            option.classList.remove('active');
        }
    });
}